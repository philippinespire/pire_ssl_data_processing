library("inline")
library("gam")
library("tidyverse")
args <- commandArgs(trailingOnly=TRUE)
target_dir <- args[1]
library("tidyverse")
install.packages(tidyverse)
install.packages("tidyverse")
library(tidyverse)
args <- commandArgs(trailingOnly=TRUE)
target_dir <- args[1]
setwd(target_dir)
quit()
pwd()
getwd()
failed_out_files <- list.files(pattern = 'clmp_') %>%
  tibble(out_files = .) %>%
  mutate(successful = map_lgl(out_files, ~read_lines(.x) %>%
                                str_detect("Done!") %>%
                                any)) %>%
  filter(!successful) %>%
  pull(out_files)
library(tidyverse)
args <- commandArgs(trailingOnly=TRUE)
target_dir <- args[1]
failed_out_files <- list.files(pattern = 'clmp_') %>%
  tibble(out_files = .) %>%
  mutate(successful = map_lgl(out_files, ~read_lines(.x) %>%
                                str_detect("Done!") %>%
                                any)) %>%
  filter(!successful) %>%
  pull(out_files)
if(length(failed_out_files) == 0){
  message('Clumpify Successfully worked on all samples')
} else {
  message('Clumpify failed on ', length(failed_out_files), ' samples. Inspect the following outfiles:\n', str_c(failed_out_files, collapse = '\n'))
}
exit
quit()
